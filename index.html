<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Dogfight: Ace Wing</title>
    <!-- Import Futuristic Font -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div id="markers-layer"></div>

    <div id="hud">
        <!-- Top Right: Score -->
        <div id="hud-top-right">
            <div class="hud-panel">
                <span class="hud-label">SCORE //</span>
                <span id="score-val">0</span>
            </div>
            <div class="hud-panel" id="lives-panel">
                <span class="hud-label">LIVES //</span>
                <span id="lives-val">3</span>
            </div>
        </div>

        <div id="hud-top-left">
            <div id="net-badge">OFFLINE</div>
        </div>

        <!-- Bottom Left: Radar -->
        <div id="hud-bottom-left">
            <div id="radar-container"></div>
        </div>

        <!-- Bottom Right: Missiles & HP -->
        <div id="hud-bottom-right">
            <div class="hud-panel missile-display">
                <span class="hud-label">ORDNANCE //</span>
                <span id="missile-val" class="hud-value">20</span>
            </div>
            
            <div class="hud-panel hp-container">
                <span class="hud-label">HULL INTEGRITY //</span>
                <div class="hp-bar-frame">
                    <div id="hp-bar-fill"></div>
                </div>
            </div>
        </div>

        <!-- Center Alerts -->
        <div id="missile-alert">MISSILE INBOUND</div>
        <div id="message-area">TARGET LOCKED</div>
    </div>
    
    <div id="crosshair-wrapper">
        <div id="crosshair"></div>
        <div id="crosshair-dot"></div>
    </div>

    <div id="game-over-msg" style="display:none;"></div>

    <div id="menu-overlay">
        <h1>ACE WING</h1>
        <div id="title-screen" class="menu-section active">
            <div class="menu-container">
                <div style="grid-column:1/-1; text-align:center; letter-spacing:6px; text-shadow:0 0 15px #fff; opacity:0.85;">TACTICAL FLIGHT INTERFACE // READY</div>
                <div style="grid-column:1/-1; text-align:center;">
                    <button id="enter-world-select" class="stage-btn" style="max-width:400px; margin:40px auto 10px auto; text-align:center;"><span>ENTER OPS ROOM</span></button>
                    <button id="title-to-world" class="stage-btn ghost-btn" style="max-width:400px; margin:0 auto; text-align:center;"><span>MISSION SELECT</span></button>
                    <button id="title-to-online" class="stage-btn ghost-btn" style="max-width:400px; margin:10px auto 0 auto; text-align:center;"><span>ONLINE OPS</span></button>
                </div>
            </div>
        </div>

        <div id="world-screen" class="menu-section">
            <div class="menu-container">
                <div>
                    <h2 style="border-bottom:1px solid #fff; padding-bottom:10px;">OPERATIONS</h2>
                    <button class="stage-btn" data-stage="OCEAN"><span>OCEAN BLUE</span></button>
                    <button class="stage-btn" data-stage="CITY"><span>NEON CITY</span></button>
                    <button class="stage-btn" data-stage="WASTELAND"><span>RED CANYON</span></button>
                    <div class="menu-actions">
                        <button class="stage-btn ghost-btn" id="world-to-title"><span>BACK TO TITLE</span></button>
                    </div>
                </div>
                <div>
                    <h2 style="border-bottom:1px solid #fff; padding-bottom:10px;">TOP ACES</h2>
                    <ul id="highscore-list" style="list-style:none; padding:0; font-size:1.2rem;">
                        <li>Loading...</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="online-screen" class="menu-section">
            <div class="menu-container">
                <div>
                    <h2 style="border-bottom:1px solid #fff; padding-bottom:10px;">ONLINE OPS</h2>
                    <label class="hud-label" for="room-code">ROOM CODE</label>
                    <input id="room-code" type="text" maxlength="8" placeholder="E.g. FOX1" class="input-control">
                    <label class="hud-label" for="mode-select">MODE</label>
                    <select id="mode-select" class="input-control">
                        <option value="ONLINE_VS">1v1 DOGFIGHT</option>
                        <option value="ONLINE_COOP">2P VS NPC</option>
                    </select>
                    <label class="hud-label" for="stage-select">STAGE</label>
                    <select id="stage-select" class="input-control">
                        <option value="OCEAN">OCEAN BLUE</option>
                        <option value="CITY">NEON CITY</option>
                        <option value="WASTELAND">RED CANYON</option>
                    </select>
                    <div class="menu-actions">
                        <button id="online-start" class="stage-btn"><span>DEPLOY ONLINE</span></button>
                        <button id="online-random" class="stage-btn ghost-btn"><span>RANDOM MATCH</span></button>
                        <button class="stage-btn ghost-btn" id="online-to-title"><span>BACK</span></button>
                    </div>
                    <div id="online-hint">Server: ws://localhost:3001 (edit in script.js if needed)</div>
                </div>
                <div>
                    <h2 style="border-bottom:1px solid #fff; padding-bottom:10px;">STATUS</h2>
                    <div id="net-status-block">
                        <div class="hud-label" style="margin-bottom:4px;">CONNECTION</div>
                        <div id="net-status-text" class="hud-value" style="font-size:1.6rem;">OFFLINE</div>
                        <div id="net-room-text" class="hud-label" style="margin-top:10px;">ROOM --</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="waiting-screen" class="menu-section">
            <div class="waiting-container">
                <div class="spinner"></div>
                <div id="waiting-text">MATCHING...</div>
                <button id="cancel-wait" class="stage-btn ghost-btn" style="max-width:320px;"><span>CANCEL</span></button>
            </div>
        </div>

        <div id="result-screen" class="menu-section">
            <div class="menu-container result-container">
                <div class="result-block">
                    <div class="hud-label" style="text-align:center;">MISSION REPORT //</div>
                    <div id="result-outcome" class="result-outcome">MISSION COMPLETE</div>
                    <div id="result-score" class="hud-value" style="font-size:3rem; text-align:center;">0</div>
                    <div id="result-rank" class="rank-badge">D</div>
                    <div id="result-stats">
                        <div><span class="hud-label">DAMAGE DEALT //</span><span id="stat-dmg-dealt">0</span></div>
                        <div><span class="hud-label">DAMAGE TAKEN //</span><span id="stat-dmg-taken">0</span></div>
                        <div><span class="hud-label">KILLS //</span><span id="stat-kills">0</span></div>
                        <div><span class="hud-label">DEATHS //</span><span id="stat-deaths">0</span></div>
                    </div>
                </div>
                <div class="menu-actions">
                    <button id="retry-btn" class="stage-btn"><span>REDEPLOY</span></button>
                    <button id="result-to-world" class="stage-btn ghost-btn"><span>MISSION SELECT</span></button>
                    <button id="result-to-title" class="stage-btn ghost-btn"><span>TITLE</span></button>
                </div>
            </div>
        </div>
    </div>

    <div id="canvas-container"></div>

    <script src="script.js"></script>
</body>
</html>
